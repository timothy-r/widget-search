{
  "query": {
    "bool": {
      "must": {
        "match": {
          "__KEY__": "__VALUE__"
        }
      }
    }
  },
  "aggs" : {
    "widgets": {
      "terms": {
        "field": "__TERM__"
      }
    }
  }
}